import{i as d}from"./vendor-C97g7yHx.js";const e={closeModalBtn:document.querySelector(".feedbacks-modal-btn"),modal:document.querySelector(".feedbacks-modal"),form:document.querySelector(".feedbacks-modal-form"),submitBtn:document.querySelector(".feedback-modal-submit"),body:document.body},m=t=>{e.submitBtn.disabled=!t,e.submitBtn.style.opacity=t?"1":"0.5",e.submitBtn.style.cursor=t?"pointer":"not-allowed"},n=()=>{if(!e.form&&!e.submitBtn)return;const t=e.form.querySelector('input[name="name"]'),o=e.form.querySelector('textarea[name="message"]'),a=e.form.querySelector('input[name="rating"]:checked'),s=t&&t.value.trim()!=="",i=o&&o.value.trim()!=="";m(s&&i&&a!==null)},c=t=>{t.key==="Escape"&&r()},y=()=>{e.modal.classList.remove("is-hidden"),e.body.style.overflow="hidden",document.addEventListener("keydown",c),n()},r=()=>{e.modal.classList.add("is-hidden"),e.body.style.overflow="",document.removeEventListener("keydown",c),e.form.reset(),n()};e.form.addEventListener("input",n);e.form.addEventListener("change",n);e.closeModalBtn.addEventListener("click",r);e.modal.addEventListener("click",t=>{t.target===e.modal&&r()});n();e.form.addEventListener("submit",async t=>{t.preventDefault();const o=new FormData(t.currentTarget),a={name:o.get("name").trim(),rating:Number(o.get("rating")),descr:o.get("message").trim()};try{const s=await fetch("https://sound-wave.b.goit.study/api/feedbacks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});if(!s.ok){const i=await s.json();throw new Error(i.message||"Something went wrong.")}d.success({title:"Success",message:"Thank you for your feedback!",position:"topRight"}),r()}catch(s){d.error({title:"Error",message:s.message,position:"topRight"})}});export{y as openModal};
//# sourceMappingURL=submit-feedback-iQy5cpP7.js.map
