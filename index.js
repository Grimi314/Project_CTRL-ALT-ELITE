const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/feedbacks-index-v30QgVlj.js","assets/vendor-C97g7yHx.js","assets/vendor-COwsy_qA.css","assets/submit-feedback-iQy5cpP7.js"])))=>i.map(i=>d[i]);
import{a as j,i as y}from"./assets/vendor-C97g7yHx.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))u(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&u(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function u(r){if(r.ep)return;r.ep=!0;const o=n(r);fetch(r.href,o)}})();const U="modulepreload",V=function(e){return"/Project_CTRL-ALT-ELITE/"+e},C={},v=function(t,n,u){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),i=s?.nonce||s?.getAttribute("nonce");r=Promise.allSettled(n.map(a=>{if(a=V(a),a in C)return;C[a]=!0;const m=a.endsWith(".css"),g=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${g}`))return;const c=document.createElement("link");if(c.rel=m?"stylesheet":U,m||(c.as="script"),c.crossOrigin="",c.href=a,i&&c.setAttribute("nonce",i),document.head.appendChild(c),m)return new Promise((f,b)=>{c.addEventListener("load",f),c.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${a}`)))})}))}function o(s){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=s,window.dispatchEvent(i),!i.defaultPrevented)throw s}return r.then(s=>{for(const i of s||[])i.status==="rejected"&&o(i.reason);return t().catch(o)})},G=document.querySelector(".header-burger-btn"),q=document.querySelector(".mobile-menu"),K=document.querySelector(".mobile-menu .mobile-menu-close-btn"),W=document.querySelectorAll(".mobile-menu-item");G.addEventListener("click",()=>{q.classList.add("is-open"),document.body.classList.add("mobile-menu-open")});K.addEventListener("click",()=>{q.classList.remove("is-open"),document.body.classList.remove("mobile-menu-open")});W.forEach(e=>{e.addEventListener("click",()=>{q.classList.remove("is-open"),document.body.classList.remove("mobile-menu-open")})});function J(e,t){return j.get(`https://sound-wave.b.goit.study/api${e}?${t}`)}const Q={artists_list:"/artists"};async function X(e=1,t=8){const n=`page=${e}&limit=${t}`;return(await J(Q.artists_list,n)).data}const B="/Project_CTRL-ALT-ELITE/assets/icon-Bk7T_pYb.svg",L=document.querySelector(".artists-list"),Z="https://placehold.co/640x393";function ee(e){const t=L.querySelectorAll(".artists-card-item").length,n=e.map((u,r)=>{const{_id:o,strArtist:s,strBiographyEN:i,strArtistThumb:a,genres:m=[]}=u,g=m.map($=>`<li class="artists-genres-item">${$}</li>`).join(""),f=t+r<4;return`<li class="artists-card-item">
          <img class="artists-image" src="${a||Z}" alt="${s}" loading="${f?"eager":"lazy"}"
        decoding="async" fetchpriority="${f?"high":"low"}"/>
          <ul class="artists-genres-list">
            ${g}
          </ul>
          <p class="artists-name">${s}</p>
          <p class="artists-information">
            ${i}
          </p>
          <button class="artists-learn-more-card-btn open-artist-modal" data-artist-id="${o}">
            Learn More
            <svg class="caret-right-icon" width="8" height="16">
              <use href="${B}#icon-button-artists"></use>
            </svg>
          </button>
        </li>`}).join("");L.insertAdjacentHTML("beforeend",n),setTimeout(()=>{L.querySelectorAll(".artists-information").forEach(te)},0)}function te(e){const t=e.dataset.fulltext||e.textContent.trim();if(e.dataset.fulltext=t,e.textContent=t,e.scrollHeight<=e.clientHeight)return;const n=t.split(" ");for(;n.length&&e.scrollHeight>e.clientHeight;)n.pop(),e.textContent=n.join(" ")+"..."}let N=null;const re=document.querySelector("[data-modal]");function ne(e){const t=e.target.closest(".artists-learn-more-card-btn");t&&(N=t.dataset.artistId,se())}function oe(){return N}function se(){re.classList.remove("is-hidden")}async function ie(e){if(!e)throw new Error("Oops...something wrong :(");const{data:t}=await j.get(`https://sound-wave.b.goit.study/api/artists/${e}/albums`);return t}async function ae(e){const{genres:t=[],albumsList:n=[],strArtist:u="Unknown artist",strArtistThumb:r="",strBiographyEN:o="",strGender:s="-",strCountry:i="-",intMembers:a="-",intFormedYear:m="-",intDiedYear:g=null}=await ie(e),c=g??"present";function f(d){if(!d||d===0||d==="0")return"—";const p=parseInt(d),k=Math.floor(p/6e4).toString().padStart(2,"0"),F=Math.floor(p%6e4/1e3).toString().padStart(2,"0");return`${k}:${F}`}const b=t.map(d=>`<div data-genres class="section-modal-genres">${d}</div>`).join(""),P=d=>(d??[]).map(p=>{const k=p.movie?`
          <a data-item-icon-linc href="${p.movie}" class="container-list-item-span-link" target="_blank" rel="noopener noreferrer">
            <svg class="close-svg" width="24" height="24">
                <use href="${B}#icon-Youtube"></use>
            </svg>
          </a>`:"";return`
          <li class="section-modal-albume-container-list-item">
          <span data-item-nane class="container-list-item-span">${p.strTrack??"—"}</span>
          <span data-item-time class="container-list-item-span">${f(p.intDuration)}</span>${k}
          </li>
    `}).join(""),$=n.map(d=>`
        <div data-albume-container class="section-modal-albume-container">
          <h3 data-albume-title class="section-modal-albume-container-title">${d.strAlbum??"-"}</h3>

          <ul class="section-modal-albume-container-list">
            <li class="section-modal-albume-container-list-item-selrct">
              <span class="container-list-item-selrct-span">Track</span>
              <span class="container-list-item-selrct-span">Time</span>
              <span class="container-list-item-selrct-span">Link</span>
            </li>
            ${P(d.tracks)}
          </ul>
    </div>
    `).join(""),l=document.querySelector(".modal-template").content.cloneNode(!0);return l.querySelector("[data-artist-title]").textContent=u,l.querySelector("[data-sex]").textContent=s,l.querySelector("[data-members]").textContent=a,l.querySelector("[data-country]").textContent=i,l.querySelector("[data-biography]").textContent=o,l.querySelector("[data-years]").textContent=`${m}-${c}`,l.querySelector("[data-section-modal-img]").src=r,l.querySelector("[data-section-modal-img]").alt=u,l.querySelector("[data-genres]").innerHTML=b,l.querySelector("[data-albums-wrapper]").innerHTML=$,l}const _=document.querySelector(".backdrop"),O=document.querySelector(".js-modal-content"),I=document.querySelector("[data-modal-loader]"),R=document.querySelector(".modal-close");function D(e){e.key==="Escape"&&A()}function H(e){e.target===_&&A()}function ce(){R.addEventListener("click",A),document.addEventListener("keydown",D),_.addEventListener("click",H)}function A(){_.classList.add("is-hidden"),R.removeEventListener("click",A),document.removeEventListener("keydown",D),_.removeEventListener("click",H),h.clearModalContent()}const h={clearModalContent(){O.innerHTML=""},renderModal(e){this.clearModalContent(),O.appendChild(e)},showLoader(){I.classList.remove("is-hidden")},hideLoader(){I.classList.add("is-hidden")},showError(){y.error({message:"Oops...something wrong :(",position:"topRight"})}};async function Y(e){try{h.showLoader(),ce();const t=await ae(e);h.renderModal(t)}catch{h.showError()}finally{h.hideLoader()}}const le=Object.freeze(Object.defineProperty({__proto__:null,showArtist:Y},Symbol.toStringTag,{value:"Module"})),T=8;let w=1;const E=document.querySelector(".artists-load-more-btn"),M=document.querySelector("[data-artists-loader]");L.addEventListener("click",de);E.addEventListener("click",ue);function de(e){ne(e);const t=oe();t&&Y(t)}async function z(e,t){try{const n=await X(e,t);return ee(n.artists),n.artists||[]}catch{return y.error({message:"Failed to load artists. Please try again."}),[]}}z(w,T);async function ue(){w+=1,E.classList.add("artists-visually-hidden"),M.classList.remove("is-hidden");try{const e=await z(w,T);if(M.classList.add("is-hidden"),e.length===0){y.warning({message:"You've load all available artists.There're nomore results."});return}if(e.length<T){y.warning({message:`You've load last ${e.length} artists`});return}E.classList.remove("artists-visually-hidden")}catch{w-=1,M.classList.add("is-hidden"),y.error({message:"Something went wrong while trying to load artists. Please try again"}),E.classList.remove("artists-visually-hidden")}}let x=!1;window.addEventListener("load",()=>{v(()=>Promise.resolve().then(()=>me),void 0),v(()=>Promise.resolve().then(()=>pe),void 0)});function S(){x||(x=!0,v(()=>Promise.resolve().then(()=>le),void 0),v(()=>import("./assets/feedbacks-index-v30QgVlj.js"),__vite__mapDeps([0,1,2,3])),v(()=>import("./assets/submit-feedback-iQy5cpP7.js"),__vite__mapDeps([3,1,2])),window.removeEventListener("pointerdown",S),window.removeEventListener("keydown",S))}window.addEventListener("pointerdown",S,{once:!0});window.addEventListener("keydown",S,{once:!0});const me=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),pe=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{J as g,B as i};
//# sourceMappingURL=index.js.map
