import{a as T,i as u}from"./assets/vendor-COXuPeDw.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))a(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const l of o.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&a(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();function F(t,e){return T.get(`https://sound-wave.b.goit.study/api${t}?${e}`)}const Y={artists_list:"/artists"};async function _(t=1,e=8){const n=`page=${t}&limit=${e}`;return(await F(Y.artists_list,n)).data}const q=document.querySelector(".artists-list"),K="https://placehold.co/640x393";function V(t){const e=t.map(n=>{const{_id:a,strArtist:s,strBiographyEN:o,strArtistThumb:l,genres:v=[]}=n,L=v.map(S=>`<li class="artists-genres-item">${S}</li>`).join("");return`<li class="artists-card-item">
          <img class="artists-image" src="${l||K}" alt="${s}" />
          <ul class="artists-genres-list">
            ${L}
          </ul>
          <p class="artists-name">${s}</p>
          <p class="artists-information">
            ${o}
          </p>
          <button class="artists-learn-more-card-btn open-artist-modal" data-artist-id="${a}">
            Learn More
            <svg class="caret-right-icon" width="8" height="16">
              <use href="/img/icon.svg#icon-icon-button-artists"></use>
            </svg>
          </button>
        </li>`}).join("");q.insertAdjacentHTML("beforeend",e),setTimeout(()=>{q.querySelectorAll(".artists-information").forEach(z)},0)}function z(t){const e=t.dataset.fulltext||t.textContent.trim();if(t.dataset.fulltext=e,t.textContent=e,t.scrollHeight<=t.clientHeight)return;const n=e.split(" ");for(;n.length&&t.scrollHeight>t.clientHeight;)n.pop(),t.textContent=n.join(" ")+"..."}const G=document.querySelector("[data-modal]");function J(t){const e=t.target.closest(".artists-learn-more-card-btn");e&&(e.dataset.artistId,U())}function U(){G.classList.remove("is-hidden")}const E=8;let p=1;const g=document.querySelector(".artists-load-more-btn"),k=document.querySelector(".loader");q.addEventListener("click",J);g.addEventListener("click",Q);async function B(t,e){try{const n=await _(t,e);return V(n.artists),n.artists||[]}catch{return u.error({message:"Failed to load artists. Please try again."}),[]}}B(p,E);async function Q(){p+=1,g.classList.add("artists-visually-hidden"),k.classList.remove("artists-visually-hidden");try{const t=await B(p,E);if(k.classList.add("artists-visually-hidden"),t.length===0){u.warning({message:"You've load all available artists.There're nomore results."});return}if(t.length<E){u.warning({message:`You've load last ${t.length} artists`});return}g.classList.remove("artists-visually-hidden")}catch{p-=1,k.classList.add("artists-visually-hidden"),u.error({message:"Something went wrong while trying to load artists. Please try again"}),g.classList.remove("artists-visually-hidden")}}async function W(t){const{data:e}=await T.get(`https://sound-wave.b.goit.study/api/artists/${t}/albums`);return e}async function X(t){const{genres:e=[],albumsList:n=[],strArtist:a="Unknown artist",strArtistThumb:s="",strBiographyEN:o="",strGender:l="-",strCountry:v="-",intMembers:L="-",intFormedYear:S="-",intDiedYear:j=null}=await W(t),O=j??"present";function P(c){if(!c||c===0||c==="0")return"—";const d=parseInt(c),w=Math.floor(d/6e4).toString().padStart(2,"0"),R=Math.floor(d%6e4/1e3).toString().padStart(2,"0");return`${w}:${R}`}const D=e.map(c=>`<div data-genres class="section-modal-genres">${c}</div>`).join(""),H=c=>(c??[]).map(d=>{const w=d.movie?`
          <a data-item-icon-linc href="${d.movie}" class="container-list-item-span-link" target="_blank" rel="noopener noreferrer">
            <svg class="close-svg" width="24" height="24">
                <use href="/img/icon.svg#icon-Youtube"></use>
            </svg>
          </a>`:"";return`
          <li class="section-modal-albume-container-list-item">
          <span data-item-nane class="container-list-item-span">${d.strTrack??"—"}</span>
          <span data-item-time class="container-list-item-span">${P(d.intDuration)}</span>${w}
          </li>
    `}).join(""),I=n.map(c=>`
        <div data-albume-container class="section-modal-albume-container">
          <h3 data-albume-title class="section-modal-albume-container-title">${c.strAlbum??"-"}</h3>

          <ul class="section-modal-albume-container-list">
            <li class="section-modal-albume-container-list-item-selrct">
              <span class="container-list-item-selrct-span">Track</span>
              <span class="container-list-item-selrct-span">Time</span>
              <span class="container-list-item-selrct-span">Link</span>
            </li>
            ${H(c.tracks)}
          </ul>
    </div>
    `).join(""),i=document.querySelector(".modal-template").content.cloneNode(!0);return i.querySelector("[data-artist-title]").textContent=a,i.querySelector("[data-sex]").textContent=l,i.querySelector("[data-members]").textContent=L,i.querySelector("[data-country]").textContent=v,i.querySelector("[data-biography]").textContent=o,i.querySelector("[data-years]").textContent=`${S}-${O}`,i.querySelector("[data-section-modal-img]").src=s,i.querySelector("[data-section-modal-img]").alt=a,i.querySelector("[data-genres]").innerHTML=D,i.querySelector("[data-albums-wrapper]").innerHTML=I,i}const f=document.querySelector(".backdrop"),$=document.querySelector(".js-modal-content"),C=document.querySelector(".loader"),x=document.querySelector(".modal-close");function A(t){t.key==="Escape"&&y()}function N(t){t.target===f&&y()}function Z(){x.addEventListener("click",y),document.addEventListener("keydown",A),f.addEventListener("click",N)}function y(){f.classList.add("is-hidden"),x.removeEventListener("click",y),document.removeEventListener("keydown",A),f.removeEventListener("click",N),m.clearModalContent()}const m={clearModalContent(){$.innerHTML=""},renderModal(t){this.clearModalContent(),$.appendChild(t)},showLoader(){C.classList.remove("is-hidden")},hideLoader(){C.classList.add("is-hidden")},showError(){u.error({message:"Oops...something wrong :(",position:"topRight"})}};async function tt(t){try{m.showLoader(),Z();const e=await X(t);m.renderModal(e)}catch{m.showError()}finally{m.hideLoader()}}tt("65adae06af9f6d155db4b23a");const et=document.querySelector(".header-burger-btn"),M=document.querySelector(".mobile-menu"),st=document.querySelector(".mobile-menu .mobile-menu-close-btn"),nt=document.querySelectorAll(".mobile-menu-item");et.addEventListener("click",()=>{M.classList.add("is-open"),document.body.classList.add("mobile-menu-open")});st.addEventListener("click",()=>{M.classList.remove("is-open"),document.body.classList.remove("mobile-menu-open")});nt.forEach(t=>{t.addEventListener("click",()=>{M.classList.remove("is-open"),document.body.classList.remove("mobile-menu-open")})});const r={closeModalBtn:document.querySelector(".feedbacks-modal-btn"),modal:document.querySelector(".feedbacks-modal"),form:document.querySelector(".feedbacks-modal-form"),submitBtn:document.querySelector(".feedback-modal-submit"),body:document.body},rt=t=>{r.submitBtn.disabled=!t,r.submitBtn.style.opacity=t?"1":"0.5",r.submitBtn.style.cursor=t?"pointer":"not-allowed"},h=()=>{if(!r.form&&!r.submitBtn)return;const t=r.form.querySelector('input[name="name"]'),e=r.form.querySelector('textarea[name="message"]'),n=r.form.querySelector('input[name="rating"]:checked'),a=t&&t.value.trim()!=="",s=e&&e.value.trim()!=="";rt(a&&s&&n!==null)},ot=t=>{t.key==="Escape"&&b()},b=()=>{r.modal.classList.add("is-hidden"),r.body.style.overflow="",window.removeEventListener("keydown",ot),r.form.reset(),h()};r.form.addEventListener("input",h);r.form.addEventListener("change",h);r.closeModalBtn.addEventListener("click",b);r.modal.addEventListener("click",t=>{t.target===r.modal&&b()});h();r.form.addEventListener("submit",async t=>{t.preventDefault();const e=new FormData(t.currentTarget),n={name:e.get("name").trim(),rating:Number(e.get("rating")),descr:e.get("message").trim()};try{const a=await fetch("https://sound-wave.b.goit.study/api/feedbacks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)});if(!a.ok){const s=await a.json();throw new Error(s.message||"Something went wrong.")}u.success({title:"Success",message:"Thank you for your feedback!",position:"topRight"}),b()}catch(a){u.error({title:"Error",message:a.message,position:"topRight"})}});
//# sourceMappingURL=index.js.map
