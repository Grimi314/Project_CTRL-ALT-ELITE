import{a as A,i as g}from"./assets/vendor-CK1Rzdhu.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function c(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(t){if(t.ep)return;t.ep=!0;const s=c(t);fetch(t.href,s)}})();console.log("hello");async function j(e){const{data:n}=await A.get(`https://sound-wave.b.goit.study/api/artists/${e}/albums`);return n}async function D(e){const{genres:n=[],albumsList:c=[],strArtist:r="Unknown artist",strArtistThumb:t="",strBiographyEN:s="",strGender:d="-",strCountry:q="-",intMembers:E="-",intFormedYear:M="-",intDiedYear:C=null}=await j(e),T=C??"present";function $(i){if(!i||i===0||i==="0")return"—";const l=parseInt(i),b=Math.floor(l/6e4).toString().padStart(2,"0"),N=Math.floor(l%6e4/1e3).toString().padStart(2,"0");return`${b}:${N}`}const B=n.map(i=>`<div data-genres class="section-modal-genres">${i}</div>`).join(""),x=i=>(i??[]).map(l=>{const b=l.movie?`
          <a data-item-icon-linc href="${l.movie}" class="container-list-item-span-link" target="_blank" rel="noopener noreferrer">
            <svg class="close-svg" width="24" height="24">
                <use href="/img/icon.svg#icon-Youtube"></use>
            </svg>
          </a>`:"";return`
          <li class="section-modal-albume-container-list-item">
          <span data-item-nane class="container-list-item-span">${l.strTrack??"—"}</span>
          <span data-item-time class="container-list-item-span">${$(l.intDuration)}</span>${b}
          </li>
    `}).join(""),O=c.map(i=>`
        <div data-albume-container class="section-modal-albume-container">
          <h3 data-albume-title class="section-modal-albume-container-title">${i.strAlbum??"-"}</h3>

          <ul class="section-modal-albume-container-list">
            <li class="section-modal-albume-container-list-item-selrct">
              <span class="container-list-item-selrct-span">Track</span>
              <span class="container-list-item-selrct-span">Time</span>
              <span class="container-list-item-selrct-span">Link</span>
            </li>
            ${x(i.tracks)}
          </ul>
    </div>
    `).join(""),a=document.querySelector(".modal-template").content.cloneNode(!0);return a.querySelector("[data-artist-title]").textContent=r,a.querySelector("[data-sex]").textContent=d,a.querySelector("[data-members]").textContent=E,a.querySelector("[data-country]").textContent=q,a.querySelector("[data-biography]").textContent=s,a.querySelector("[data-years]").textContent=`${M}-${T}`,a.querySelector("[data-section-modal-img]").src=t,a.querySelector("[data-section-modal-img]").alt=r,a.querySelector("[data-genres]").innerHTML=B,a.querySelector("[data-albums-wrapper]").innerHTML=O,a}const u=document.querySelector(".backdrop"),v=document.querySelector(".js-modal-content"),L=document.querySelector(".loader"),S=document.querySelector(".modal-close");function k(e){e.key==="Escape"&&p()}function w(e){e.target===u&&p()}function P(){S.addEventListener("click",p),document.addEventListener("keydown",k),u.addEventListener("click",w)}function p(){u.classList.add("is-hidden"),S.removeEventListener("click",p),document.removeEventListener("keydown",k),u.removeEventListener("click",w),m.clearModalContent()}const m={clearModalContent(){v.innerHTML=""},renderModal(e){this.clearModalContent(),v.appendChild(e)},showLoader(){L.classList.remove("is-hidden")},hideLoader(){L.classList.add("is-hidden")},showError(){g.error({message:"Oops...something wrong :(",position:"topRight"})}};async function R(e){try{m.showLoader(),P();const n=await D(e);m.renderModal(n)}catch{m.showError()}finally{m.hideLoader()}}R("65adae06af9f6d155db4b23a");const F=document.querySelector(".header-burger-btn"),h=document.querySelector(".mobile-menu"),Y=document.querySelector(".mobile-menu .mobile-menu-close-btn"),H=document.querySelectorAll(".mobile-menu-item");F.addEventListener("click",()=>{h.classList.add("is-open"),document.body.classList.add("mobile-menu-open")});Y.addEventListener("click",()=>{h.classList.remove("is-open"),document.body.classList.remove("mobile-menu-open")});H.forEach(e=>{e.addEventListener("click",()=>{h.classList.remove("is-open"),document.body.classList.remove("mobile-menu-open")})});const o={closeModalBtn:document.querySelector(".feedbacks-modal-btn"),modal:document.querySelector(".feedbacks-modal"),form:document.querySelector(".feedbacks-modal-form"),submitBtn:document.querySelector(".feedback-modal-submit"),body:document.body},I=e=>{o.submitBtn.disabled=!e,o.submitBtn.style.opacity=e?"1":"0.5",o.submitBtn.style.cursor=e?"pointer":"not-allowed"},f=()=>{if(!o.form&&!o.submitBtn)return;const e=o.form.querySelector('input[name="name"]'),n=o.form.querySelector('textarea[name="message"]'),c=o.form.querySelector('input[name="rating"]:checked'),r=e&&e.value.trim()!=="",t=n&&n.value.trim()!=="";I(r&&t&&c!==null)},K=e=>{e.key==="Escape"&&y()},y=()=>{o.modal.classList.add("is-hidden"),o.body.style.overflow="",window.removeEventListener("keydown",K),o.form.reset(),f()};o.form.addEventListener("input",f);o.form.addEventListener("change",f);o.closeModalBtn.addEventListener("click",y);o.modal.addEventListener("click",e=>{e.target===o.modal&&y()});f();o.form.addEventListener("submit",async e=>{e.preventDefault();const n=new FormData(e.currentTarget),c={name:n.get("name").trim(),rating:Number(n.get("rating")),descr:n.get("message").trim()};try{const r=await fetch("https://sound-wave.b.goit.study/api/feedbacks",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(c)});if(!r.ok){const t=await r.json();throw new Error(t.message||"Something went wrong.")}g.success({title:"Success",message:"Thank you for your feedback!",position:"topRight"}),y()}catch(r){g.error({title:"Error",message:r.message,position:"topRight"})}});
//# sourceMappingURL=index.js.map
